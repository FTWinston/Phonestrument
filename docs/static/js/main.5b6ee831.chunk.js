(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n.p+"static/media/logo.bd3b845b.svg"},13:function(e,t,n){e.exports=n(85)},21:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a,o=n(0),s=n.n(o),i=n(10),l=n.n(i),r=n(2),c=n(3),m=n(5),u=n(4),p=n(6),h=n(8),v=n.n(h),f=n(11),d=n(7);!function(e){e[e.Note=0]="Note",e[e.HighlightNote=1]="HighlightNote"}(a||(a={}));var g=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={active:!1,text:e.text,octave:e.octave,altProfile:e.altProfile},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.altProfile===this.props.altProfile||this.state.active||this.setState({text:e.text,octave:e.octave,altProfile:e.altProfile})}},{key:"render",value:function(){var e=this,t=function(){e.setState({active:!1,text:e.props.text,octave:e.props.octave,altProfile:e.props.altProfile}),!1!==e.props.enabled&&e.props.stop()},n="player__button";switch(this.state.active&&(n+=" player__button--active"),this.state.altProfile&&(n+=" player__button--altProfile"),!1===this.props.enabled&&(n+=" player__button--disabled"),this.props.type!=a.Note&&this.props.type!=a.HighlightNote||(this.props.isLeft&&(n+=" player__button--left"),this.props.isRight&&(n+=" player__button--right"),this.props.isTop&&(n+=" player__button--top")),this.props.type){case a.HighlightNote:n+=" player__button--highlight"}var s=void 0===this.props.orderNum?void 0:{order:this.props.orderNum};return o.createElement("div",{className:n,style:s,onTouchStart:function(){e.setState({active:!0,text:e.props.text,octave:e.props.octave,altProfile:e.props.altProfile}),!1!==e.props.enabled&&e.props.start()},onTouchEnd:t,onTouchCancel:t},this.state.text,o.createElement("sub",null,this.state.octave))}}]),t}(o.PureComponent),y=function(){function e(){Object(r.a)(this,e),this.audioCtx=void 0,this.gain=void 0,this.oscillators={},this.voice={name:"Default",apply:function(e){return e.type="sine",e}},this.audioCtx=new AudioContext,this.gain=this.audioCtx.createGain();var t=this.audioCtx.createDynamicsCompressor();t.threshold.setValueAtTime(-50,this.audioCtx.currentTime),t.knee.setValueAtTime(40,this.audioCtx.currentTime),t.ratio.setValueAtTime(12,this.audioCtx.currentTime),t.attack.setValueAtTime(0,this.audioCtx.currentTime),t.release.setValueAtTime(.25,this.audioCtx.currentTime),this.gain.connect(t),t.connect(this.audioCtx.destination)}return Object(c.a)(e,[{key:"setVolume",value:function(e){this.gain.gain.setValueAtTime(e,this.audioCtx.currentTime)}},{key:"setVoice",value:function(e){this.voice=e}},{key:"start",value:function(e,t){if(void 0===this.oscillators[e]){var n=this.audioCtx.createOscillator();this.voice.apply(n),n.frequency.setValueAtTime(t,this.audioCtx.currentTime),n.start();var a=this.determineWeighting(t),o=1/Math.pow(10,a/20),s=this.audioCtx.createGain();s.gain.setValueAtTime(o,this.audioCtx.currentTime),n.connect(s),s.connect(this.gain),this.oscillators[e]={oscillator:n,gain:s}}}},{key:"stop",value:function(e){var t=this.oscillators[e];void 0!==t&&(delete this.oscillators[e],this.stopOscillator(t))}},{key:"stopAll",value:function(){for(var e in this.oscillators){var t=this.oscillators[e];this.stopOscillator(t)}this.oscillators={}}},{key:"stopOscillator",value:function(e){var t=this,n=e.gain.gain;n.setValueAtTime(n.value,this.audioCtx.currentTime),n.exponentialRampToValueAtTime(1e-4,this.audioCtx.currentTime+.05),setTimeout(function(){e.oscillator.stop(),e.gain.disconnect(t.gain)},25)}},{key:"determineWeighting",value:function(e){var t=e*e,n=1.562339*t*t/((t+11589.093052)*(t+544440.670461)),a=2242881e10*t*t/((t+424.318677406)*(t+424.318677406)*(t+148699001.408)*(t+148699001.408));return Math.log10(n)+Math.log10(a)}}]),e}(),b=(n(21),n(23)),E=n(24),C=n(25),_=n(26),S=n(27),T=n(28),k=n(29),N=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).audio=new y,n.tiltListener=function(e){return n.updateTilt(e)},n.state=Object(d.a)({},e.profiles[0],{altProfile:!1}),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.audio.setVolume(this.state.volume),this.audio.setVoice(this.state.voice),this.props.profiles.length>1&&window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",this.tiltListener);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.audio.stopAll(),this.props.profiles.length>1&&window.removeEventListener("deviceorientation",this.tiltListener)}},{key:"componentDidUpdate",value:function(e,t){t.volume!==this.state.volume&&this.audio.setVolume(this.state.volume),t.voice!==this.state.voice&&this.audio.setVoice(this.state.voice)}},{key:"updateTilt",value:function(e){null!==e.beta&&(this.state.altProfile?e.beta<0&&this.setState(Object(d.a)({},this.props.profiles[0],{altProfile:!1})):e.beta>0&&this.setState(Object(d.a)({},this.props.profiles[1],{altProfile:!0})))}},{key:"render",value:function(){var e=this,t=this.renderNoteButtons(this.state.notes),n=this.state.altProfile?"player player--altProfile":"player",a=this.props.profiles.length<2?o.createElement("div",{className:"player__tilt"}):this.state.altProfile?o.createElement("div",{className:"player__tilt"},o.createElement(S,null)," Tilt left",o.createElement("br",null),"for ",this.props.profiles[0].keyName):o.createElement("div",{className:"player__tilt"},o.createElement(T,null),"Tilt right",o.createElement("br",null),"for ",this.props.profiles[1].keyName);return o.createElement("div",{className:n},t,o.createElement("div",{className:"player__key"},this.state.keyName),o.createElement("a",{className:"player__config",href:"#",onClick:function(t){t.preventDefault(),e.props.configure()}},o.createElement(_,null)," Configure"),a)}},{key:"renderNoteButtons",value:function(e){var n=this;return e.map(function(e,s){var i=e.name===n.state.highlightNoteName?a.HighlightNote:a.Note,l=s<t.buttonOrder.length?t.buttonOrder[s]:void 0;return o.createElement(g,{key:s,text:e.name,octave:e.octave,orderNum:l,start:function(){return n.audio.start(s,e.frequency)},stop:function(){return n.audio.stop(s)},isLeft:s<5,isRight:s>=15,isTop:s%5===4,type:i,altProfile:n.state.altProfile})})}}]),t}(o.Component);N.buttonOrder=[4,3,2,1,0,9,8,7,6,5,14,13,12,11,10,19,18,17,16,15];var A=n(12),O=n.n(A),P=(n(30),function(e){function t(){return Object(r.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("div",{className:"site site--home"},o.createElement("header",{className:"site__header"},o.createElement("h2",{className:"site__title"},"Thumbophone"),o.createElement("img",{src:O.a,className:"site__logo",alt:"logo"}),o.createElement("p",null,"Use your phone as a musical instrument!")),o.createElement("div",{className:"site__links"},o.createElement("a",{className:"site__link",href:"#",onClick:function(t){t.preventDefault(),e.props.help()}},o.createElement(b,null)," Instructions"),o.createElement("a",{className:"site__link",href:"#",onClick:function(t){t.preventDefault(),e.props.configure()}},o.createElement(_,null)," Configure"),o.createElement("a",{className:"site__link site__link--primary",href:"#",onClick:function(t){t.preventDefault(),e.props.play()}},o.createElement(C,null)," Play now")))}}]),t}(o.Component)),w=[15.43,16.35,17.32,18.35,19.45,20.6,21.83,23.12,24.5,25.96,27.5,29.14,30.87,32.7,34.65,36.71,38.89,41.2,43.65,46.25,49,51.91,55,58.27,61.74,65.41,69.3,73.42,77.78,82.41,87.31,92.5,98,103.83,110,116.54,123.47,130.81,138.59,146.83,155.56,164.81,174.61,185,196,207.65,220,233.08,246.94,261.63,277.18,293.66,311.13,329.63,349.23,369.99,392,415.3,440,466.16,493.88,523.25,554.37,587.33,622.25,659.25,698.46,739.99,783.99,830.61,880,932.33,987.77,1046.5,1108.73,1174.66,1244.51,1318.51,1396.91,1479.98,1567.98,1661.22,1760,1864.66,1975.53,2093,2217.46,2349.32,2489.02,2637.02,2793.83,2959.96,3135.96,3322.44,3520,3729.31,3951.07,4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13,8372.02],B=[{name:"C\u266d",semitonesAboveC:-1},{name:"C",semitonesAboveC:0},{name:"C\u266f",semitonesAboveC:1},{name:"D\u266d",semitonesAboveC:1},{name:"D",semitonesAboveC:2},{name:"D\u266f",semitonesAboveC:3},{name:"E\u266d",semitonesAboveC:3},{name:"E",semitonesAboveC:4},{name:"E\u266f",semitonesAboveC:5},{name:"F\u266d",semitonesAboveC:4},{name:"F",semitonesAboveC:5},{name:"F\u266f",semitonesAboveC:6},{name:"G\u266d",semitonesAboveC:6},{name:"G",semitonesAboveC:7},{name:"G\u266f",semitonesAboveC:8},{name:"A\u266d",semitonesAboveC:8},{name:"A",semitonesAboveC:9},{name:"A\u266f",semitonesAboveC:10},{name:"B\u266d",semitonesAboveC:10},{name:"B",semitonesAboveC:11},{name:"B\u266f",semitonesAboveC:12}],x=10,j=13,D=16,V=19;function G(e,t){return B.map(function(n,a){var o=e+n.semitonesAboveC;return{name:n.name,frequency:w[o],octave:t}})}var W=[G(1,0),G(13,1),G(25,2),G(37,3),G(49,4),G(61,5),G(73,6),G(85,7),G(97,8)],I=[{name:"Major",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[15,18,1,3,6,x,j]},{name:"A",notes:[D,V,2,4,7,11,14]},{name:"B\u266d",notes:[18,1,4,6,x,j,D]},{name:"B",notes:[V,2,5,7,17,14,17]},{name:"C\u266d",notes:[0,3,6,9,12,15,18]},{name:"C",notes:[1,4,7,x,j,D,V]},{name:"C\u266f",notes:[2,5,8,11,14,17,20]},{name:"D\u266d",notes:[3,6,x,12,15,18,1]},{name:"D",notes:[4,7,11,j,D,V,2]},{name:"E\u266d",notes:[6,x,j,15,18,1,4]},{name:"E",notes:[7,11,14,D,V,2,5]},{name:"F",notes:[x,j,D,18,1,4,7]},{name:"F\u266f",notes:[11,14,17,V,2,5,8]},{name:"G\u266d",notes:[12,15,18,0,3,6,x]},{name:"G",notes:[j,D,V,1,4,7,11]}]},{name:"Minor",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[15,18,0,3,6,9,12]},{name:"A",notes:[D,V,1,4,7,x,j]},{name:"A\u266f",notes:[17,20,2,5,8,11,14]},{name:"B\u266d",notes:[18,1,3,6,x,12,15]},{name:"B",notes:[V,2,4,7,11,j,D]},{name:"C",notes:[1,4,6,x,j,15,18]},{name:"C\u266f",notes:[2,5,7,11,14,D,V]},{name:"D",notes:[4,7,x,j,D,18,1]},{name:"D\u266f",notes:[5,8,11,14,17,V,2]},{name:"E\u266d",notes:[6,x,12,15,18,0,3]},{name:"E",notes:[7,11,j,D,V,1,4]},{name:"F",notes:[x,j,15,18,1,3,6]},{name:"F\u266f",notes:[11,14,D,V,2,4,7]},{name:"G",notes:[j,D,18,1,4,6,x]},{name:"G\u266f",notes:[14,17,V,2,5,7,11]}]},{name:"Chromatic",notesBeforeTonic:5,scales:[{name:"A\u266d",notes:[15,D,18,V,1,3,4,6,7,x,12,j]},{name:"A",notes:[D,18,V,1,3,4,6,7,x,12,j,15]},{name:"B\u266d",notes:[18,V,1,3,4,6,7,x,12,j,15,D]},{name:"B",notes:[V,1,3,4,6,7,x,12,j,15,D,18]},{name:"C",notes:[1,3,4,6,7,x,12,j,15,D,18,V]},{name:"D\u266d",notes:[3,4,6,7,x,12,j,15,D,18,V,1]},{name:"D",notes:[4,6,7,x,12,j,15,D,18,V,1,3]},{name:"E\u266d",notes:[6,7,x,12,j,15,D,18,V,1,3,4]},{name:"E",notes:[7,x,12,j,15,D,18,V,1,3,4,6]},{name:"F",notes:[x,12,j,15,D,18,V,1,3,4,6,7]},{name:"G\u266d",notes:[12,j,15,D,18,V,1,3,4,6,7,x]},{name:"G",notes:[j,15,D,18,V,1,3,4,6,7,x,12]}]},{name:"Melodic Minor",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[15,18,V,3,6,x,j]},{name:"A",notes:[D,V,1,4,7,12,15]},{name:"B\u266d",notes:[18,1,3,6,x,j,D]},{name:"B",notes:[V,3,4,7,12,15,18]},{name:"C",notes:[1,4,6,x,j,D,V]},{name:"D\u266d",notes:[3,6,7,12,15,18,1]},{name:"D",notes:[4,7,x,j,D,V,3]},{name:"E\u266d",notes:[6,x,12,15,18,1,4]},{name:"E",notes:[7,12,j,D,V,3,6]},{name:"F",notes:[x,j,15,18,1,4,7]},{name:"G\u266d",notes:[12,15,D,V,3,6,x]},{name:"G",notes:[j,D,18,1,4,7,12]}]},{name:"Harmonic Minor",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[15,18,V,3,6,7,j]},{name:"A",notes:[D,V,1,4,7,x,15]},{name:"B\u266d",notes:[18,1,3,6,x,12,D]},{name:"B",notes:[V,3,4,7,12,j,18]},{name:"C",notes:[1,4,6,x,j,15,V]},{name:"D\u266d",notes:[3,6,7,12,15,D,1]},{name:"D",notes:[4,7,x,j,D,18,3]},{name:"E\u266d",notes:[6,x,12,15,18,V,4]},{name:"E",notes:[7,12,j,D,V,1,6]},{name:"F",notes:[x,j,15,18,1,3,7]},{name:"G\u266d",notes:[12,15,D,V,3,4,x]},{name:"G",notes:[j,D,18,1,4,6,12]}]},{name:"Minor Pentatonic",notesBeforeTonic:5,scales:[{name:"Ab",notes:[15,V,3,6,12]},{name:"A",notes:[D,1,4,7,j]},{name:"Bb",notes:[18,3,6,x,15]},{name:"B",notes:[V,4,7,12,D]},{name:"C",notes:[1,6,x,j,18]},{name:"Db",notes:[3,7,12,15,V]},{name:"D",notes:[4,x,j,D,1]},{name:"Eb",notes:[6,12,15,18,3]},{name:"E",notes:[7,j,D,V,4]},{name:"F",notes:[x,15,18,1,6]},{name:"Gb",notes:[12,D,V,3,7]},{name:"G",notes:[j,18,1,4,x]}]},{name:"Major Pentatonic",notesBeforeTonic:5,scales:[{name:"A\u266d",notes:[15,18,1,6,x]},{name:"A",notes:[D,V,3,7,12]},{name:"B\u266d",notes:[18,1,4,x,j]},{name:"B",notes:[V,3,6,12,15]},{name:"C",notes:[1,4,7,j,D]},{name:"D\u266d",notes:[3,6,x,15,18]},{name:"D",notes:[4,7,12,D,V]},{name:"E\u266d",notes:[6,x,j,18,1]},{name:"E",notes:[7,12,15,V,3]},{name:"F",notes:[x,j,D,1,4]},{name:"G\u266d",notes:[12,15,18,3,6]},{name:"G",notes:[j,D,V,4,7]}]},{name:"Minor Pentatonic Blues",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[15,V,3,4,6,12]},{name:"A",notes:[D,1,4,6,7,j]},{name:"B\u266d",notes:[18,3,6,7,x,15]},{name:"B",notes:[V,4,7,x,12,D]},{name:"C",notes:[1,6,x,12,j,18]},{name:"D\u266d",notes:[3,7,12,j,15,V]},{name:"D",notes:[4,x,j,15,D,1]},{name:"E\u266d",notes:[6,12,15,D,18,3]},{name:"E",notes:[7,j,D,18,V,4]},{name:"F",notes:[x,15,18,V,1,6]},{name:"G\u266d",notes:[12,D,V,1,3,7]},{name:"G",notes:[j,18,1,3,4,x]}]},{name:"Major Pentatonic Blues",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[15,18,V,1,6,x]},{name:"A",notes:[D,V,1,3,7,12]},{name:"B\u266d",notes:[18,1,3,4,x,j]},{name:"B",notes:[V,3,4,6,12,15]},{name:"C",notes:[1,4,6,7,j,D]},{name:"D\u266d",notes:[3,6,7,x,15,18]},{name:"D",notes:[4,7,x,12,D,V]},{name:"E\u266d",notes:[6,x,12,j,18,1]},{name:"E",notes:[7,12,j,15,V,3]},{name:"F",notes:[x,j,15,D,1,4]},{name:"G\u266d",notes:[12,15,D,18,3,6]},{name:"G",notes:[j,D,18,V,4,7]}]},{name:"Major Bebop",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[15,18,1,3,6,7,x,j]},{name:"A",notes:[D,V,3,4,7,x,12,15]},{name:"B\u266d",notes:[18,1,4,6,x,12,j,D]},{name:"B",notes:[V,3,6,7,12,j,15,18]},{name:"C",notes:[1,4,7,x,j,15,D,V]},{name:"D\u266d",notes:[3,6,x,12,15,D,18,1]},{name:"D",notes:[4,7,12,j,D,18,V,3]},{name:"E\u266d",notes:[6,x,j,15,18,V,1,4]},{name:"E",notes:[7,12,15,D,V,1,3,6]},{name:"F",notes:[x,j,D,18,1,3,4,7]},{name:"G\u266d",notes:[12,15,18,V,3,4,6,x]},{name:"G",notes:[j,D,V,1,4,6,7,12]}]},{name:"Minor Bebop",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[15,18,V,1,3,6,x,12]},{name:"A",notes:[D,V,1,3,4,7,12,j]},{name:"B\u266d",notes:[18,1,3,4,6,x,j,15]},{name:"B",notes:[V,3,4,6,7,12,15,D]},{name:"C",notes:[1,4,6,7,x,j,D,18]},{name:"D\u266d",notes:[3,6,7,x,12,15,18,V]},{name:"D",notes:[4,7,x,12,j,D,V,1]},{name:"E\u266d",notes:[6,x,12,j,15,18,1,3]},{name:"E",notes:[7,12,j,15,D,V,3,4]},{name:"F",notes:[x,j,15,D,18,1,4,6]},{name:"G\u266d",notes:[12,15,D,18,V,3,6,7]},{name:"G",notes:[j,D,18,V,1,4,7,x]}]},{name:"Super Locrian",notesBeforeTonic:6,scales:[{name:"C",notes:[1,3,6,7,12,15,18]},{name:"D\u266d",notes:[3,4,7,x,j,D,V]},{name:"D",notes:[4,6,x,12,15,18,1]},{name:"E\u266d",notes:[6,7,12,j,D,V,3]},{name:"E",notes:[7,x,j,15,18,1,4]},{name:"F",notes:[x,12,15,D,V,3,6]},{name:"G\u266d",notes:[12,j,D,18,1,4,7]},{name:"G",notes:[j,15,18,V,3,6,x]},{name:"A\u266d",notes:[15,D,V,1,4,7,12]},{name:"A",notes:[D,18,1,3,6,x,j]},{name:"B\u266d",notes:[18,V,3,4,7,12,15]},{name:"B",notes:[V,1,4,6,x,j,D]}]}],H=function(e){function t(){return Object(r.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("div",{className:"site site--help"},o.createElement("header",{className:"site__header"},o.createElement("p",null,"How to play")),o.createElement("div",{className:"site__help"},o.createElement("p",null,"The thumbophone is intended to be played on a mobile phone or similar-sized device, held in two hands. Use your left thumb for the keys on the left-hand side of the screen, and your right thumb for the keys on the right."),o.createElement("p",null,"The thumbophone ",o.createElement("em",null,"does not")," give you access to all notes; it only lets you use notes in the selected scale. (However you can select a chromatic scale if you wish.) This is similar to how most harmonicas work, except with the thumbophone, you can quickly change the scale."),o.createElement("p",null,"When you first start playing, it's easiest if you ignore the smaller buttons on the outermost columns, and just use the central two columns of buttons. Once you feel comfortable with these, move on to using the outer buttons as needed."),o.createElement("p",null,'For advanced users, you can enable an "alternate" configuration and tilt your phone left/right to switch between configurations while playing. This can be quite offputting for new players.')),o.createElement("div",{className:"site__links"},o.createElement("a",{className:"site__link",href:"#",onClick:function(t){t.preventDefault(),e.props.back()}},o.createElement(E,null)," Home")))}}]),t}(o.Component);function F(e,t,n){for(var a=-1,o=n,s=e.notes.map(function(e){return e<a&&o<W.length-1&&o++,a=e,W[o][e]}),i=t.notesBeforeTonic,l=20-i-e.notes.length,r=-1,c=0;c<l;c++){++r>=e.notes.length&&(r=0);var m=e.notes[r];m<a&&o<W.length-2&&o++,a=m,s.push(W[o][m])}a=e.notes[0],o=n,r=e.notes.length;for(var u=0;u<i;u++){--r<0&&(r=e.notes.length-1);var p=e.notes[r];p>a&&o>0&&o--,a=p,s.unshift(W[o][p])}return s}n(32);var M,L=n(1),U=[{name:"Sine wave",apply:function(e){return e.type="sine"}},{name:"Bass",apply:function(e){var t=e.context.createPeriodicWave(L.Bass.real,L.Bass.imag,{disableNormalization:!0});e.setPeriodicWave(t)}},{name:"Organ 1",apply:function(e){var t=e.context.createPeriodicWave(L.Organ2.real,L.Organ2.imag,{disableNormalization:!0});e.setPeriodicWave(t)}},{name:"Organ 2",apply:function(e){var t=e.context.createPeriodicWave(L.Organ3.real,L.Organ3.imag,{disableNormalization:!0});e.setPeriodicWave(t)}},{name:"Organ 3",apply:function(e){var t=e.context.createPeriodicWave(L.Dissonant2.real,L.Dissonant2.imag,{disableNormalization:!0});e.setPeriodicWave(t)}},{name:"Brass",apply:function(e){var t=e.context.createPeriodicWave(L.Brass.real,L.Brass.imag,{disableNormalization:!0});e.setPeriodicWave(t)}},{name:"Celeste",apply:function(e){var t=e.context.createPeriodicWave(L.Celeste.real,L.Celeste.imag,{disableNormalization:!0});e.setPeriodicWave(t)}},{name:"Throaty",apply:function(e){var t=e.context.createPeriodicWave(L.Throaty.real,L.Throaty.imag,{disableNormalization:!0});e.setPeriodicWave(t)}},{name:"Chorus Strings",apply:function(e){var t=e.context.createPeriodicWave(L.ChorusStrings.real,L.ChorusStrings.imag,{disableNormalization:!0});e.setPeriodicWave(t)}},{name:"Sawtooth",apply:function(e){return e.type="sawtooth"}},{name:"Square",apply:function(e){return e.type="square"}}],z=function(e){function t(){return Object(r.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=I.indexOf(this.props.scaleType),n=this.props.scaleType.scales.indexOf(this.props.scale),a=U.indexOf(this.props.voice),s=I.map(function(e,t){return o.createElement("option",{key:t,value:t.toString()},e.name)}),i=this.props.scaleType.scales.map(function(e,t){return o.createElement("option",{key:t,value:t.toString()},e.name)}),l=U.map(function(e,t){return o.createElement("option",{key:t,value:t.toString()},e.name)}),r=this.props.isAlternate?"site__options site__options--alternate":"site__options";return o.createElement("div",{className:r},o.createElement("label",{className:"site__option"},o.createElement("span",{className:"site__label"},"Scale"),o.createElement("select",{className:"site__value",value:t.toString(),onChange:function(t){return e.props.selectScaleType(I[t.target.selectedIndex])}},s)),o.createElement("label",{className:"site__option"},o.createElement("span",{className:"site__label"},"Tonic"),o.createElement("select",{className:"site__value",value:n.toString(),onChange:function(t){return e.props.selectScale(e.props.scaleType.scales[t.target.selectedIndex])}},i)),o.createElement("label",{className:"site__option"},o.createElement("span",{className:"site__label"},"Voice"),o.createElement("select",{className:"site__value",value:a.toString(),onChange:function(t){return e.props.selectVoice(U[t.target.selectedIndex])}},l)),o.createElement("label",{className:"site__option"},o.createElement("span",{className:"site__label"},"Octave"),o.createElement("input",{className:"site__value",type:"range",min:"1",max:"6",step:"1",value:this.props.octave,onChange:function(t){return e.props.setOctave(parseInt(t.target.value))}})),o.createElement("label",{className:"site__option"},o.createElement("span",{className:"site__label"},"Volume"),o.createElement("input",{className:"site__value",type:"range",min:"0",max:"1",step:"0.025",value:this.props.volume,onChange:function(t){return e.props.setVolume(parseFloat(t.target.value))}})))}}]),t}(o.Component),q=function(e){function t(){return Object(r.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=void 0===this.props.install?void 0:function(t){t.preventDefault(),e.props.install()},n=this.props.useSplitProfile?o.createElement(z,{isAlternate:!0,scaleType:this.props.scaleType2,scale:this.props.scale2,octave:this.props.octave2,volume:this.props.volume2,voice:this.props.voice2,selectScaleType:function(t){return e.props.selectScaleType(t,!0)},selectScale:function(t){return e.props.selectScale(t,!0)},setOctave:function(t){return e.props.setOctave(t,!0)},setVolume:function(t){return e.props.setVolume(t,!0)},selectVoice:function(t){return e.props.setVoice(t,!0)}}):void 0,a=void 0===this.props.install?void 0:o.createElement("a",{className:"site__link",href:"#",onClick:t},o.createElement(k,null)," Add to home screen");return o.createElement("div",{className:"site site--configuration"},o.createElement("header",{className:"site__header"},o.createElement("p",null,"Configuration")),o.createElement(z,{isAlternate:!1,scaleType:this.props.scaleType,scale:this.props.scale,octave:this.props.octave,volume:this.props.volume,voice:this.props.voice,selectScaleType:function(t){return e.props.selectScaleType(t,!1)},selectScale:function(t){return e.props.selectScale(t,!1)},setOctave:function(t){return e.props.setOctave(t,!1)},setVolume:function(t){return e.props.setVolume(t,!1)},selectVoice:function(t){return e.props.setVoice(t,!1)}}),o.createElement("label",{className:"site__useAlt"},"Tilt screen for alternate configuration",o.createElement("input",{type:"checkbox",checked:this.props.useSplitProfile,onChange:function(t){return e.props.setUseSplitProfile(t.target.checked)}})),n,o.createElement("div",{className:"site__links"},o.createElement("a",{className:"site__link",href:"#",onClick:function(t){t.preventDefault(),e.props.back()}},o.createElement(E,null)," Home"),o.createElement("a",{className:"site__link site__link--primary",href:"#",onClick:function(t){t.preventDefault(),e.props.play()}},o.createElement(C,null)," Play now"),a))}}]),t}(o.Component);!function(e){e[e.Home=0]="Home",e[e.Help=1]="Help",e[e.Play=2]="Play",e[e.Config=3]="Config"}(M||(M={}));var R="useSplit",J="scaleType",$="scaleType2",K="scaleNote",Q="scaleNote2",X="octave",Y="octave2",Z="volume",ee="volume2",te="voice",ne="voice2",ae="hasPlayedBefore",oe=function(e){function t(e){var n;Object(r.a)(this,t);var a=(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadScaleType(J),o=n.loadScaleType($);return n.state={display:null===localStorage.getItem(ae)?M.Home:M.Play,scaleType:a,scale:n.loadScale(a,K),octave:n.loadOctave(X),volume:n.loadVolume(Z),voice:n.loadVoice(te),useSplitProfile:n.loadUseSplit(R),scaleType2:o,scale2:n.loadScale(o,Q),octave2:n.loadOctave(Y),volume2:n.loadVolume(ee),voice2:n.loadVoice(ne)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),e.setState({installPrompt:t})}),window.addEventListener("appinstalled",function(t){e.setState({installPrompt:void 0})})}},{key:"loadScaleType",value:function(e){var t=localStorage.getItem(e);if(null!==t){var n=I.filter(function(e){return e.name===t});if(n.length>0)return n[0]}return I[0]}},{key:"loadScale",value:function(e,t){var n=localStorage.getItem(t);if(null!==n){var a=e.scales.filter(function(e){return e.name===n});if(a.length>0)return a[0]}return e.scales.filter(function(e){return"C"===e.name})[0]}},{key:"loadOctave",value:function(e){var t=localStorage.getItem(e);if(null!==t){var n=parseInt(t);if(n>=0&&n<W.length)return n}return 4}},{key:"loadVolume",value:function(e){var t=localStorage.getItem(e);if(null!==t){var n=parseFloat(t);if(n>=0&&n<=1)return n}return.1}},{key:"loadVoice",value:function(e){var t=localStorage.getItem(e);if(null!==t){var n=U.find(function(e){return e.name===t});if(void 0!==n)return n}return U[0]}},{key:"loadUseSplit",value:function(e){return"true"===localStorage.getItem(e)}},{key:"render",value:function(){var e=this;if(this.state.display===M.Help){return o.createElement(H,{back:function(){return e.setState({display:M.Home})}})}if(this.state.display===M.Play){var t=[{notes:F(this.state.scale,this.state.scaleType,this.state.octave),highlightNoteName:this.state.scale.name,keyName:"".concat(this.state.scale.name," ").concat(this.state.scaleType.name),volume:this.state.volume,voice:this.state.voice}];return this.state.useSplitProfile&&t.push({notes:F(this.state.scale2,this.state.scaleType2,this.state.octave2),highlightNoteName:this.state.scale2.name,keyName:"".concat(this.state.scale2.name," ").concat(this.state.scaleType2.name),volume:this.state.volume2,voice:this.state.voice2}),o.createElement(N,{goHome:function(){return e.setState({display:M.Home})},configure:function(){return e.setState({display:M.Config})},profiles:t})}if(this.state.display===M.Config){var n=void 0===this.state.installPrompt?void 0:function(){return e.state.installPrompt.prompt()};return o.createElement(q,{play:function(){localStorage.setItem(ae,"true"),e.setState({display:M.Play})},back:function(){return e.setState({display:M.Home})},install:n,useSplitProfile:this.state.useSplitProfile,setUseSplitProfile:function(t){localStorage.setItem(R,t.toString()),e.setState({useSplitProfile:t})},scaleType:this.state.scaleType,scaleType2:this.state.scaleType2,selectScaleType:function(t,n){var a=e.state.scaleType.scales.indexOf(n?e.state.scale2:e.state.scale),o=a>=0&&a<t.scales.length?t.scales[a]:t.scales[0];n?(localStorage.setItem($,t.name),e.setState({scaleType2:t,scale2:o})):(localStorage.setItem(J,t.name),e.setState({scaleType:t,scale:o}))},scale:this.state.scale,scale2:this.state.scale2,selectScale:function(t,n){n?(localStorage.setItem(Q,t.name),e.setState({scale2:t})):(localStorage.setItem(K,t.name),e.setState({scale:t}))},octave:this.state.octave,octave2:this.state.octave2,setOctave:function(t,n){n?(localStorage.setItem(Y,t.toString()),e.setState({octave2:t})):(localStorage.setItem(X,t.toString()),e.setState({octave:t}))},volume:this.state.volume,volume2:this.state.volume2,setVolume:function(t,n){n?(localStorage.setItem(ee,t.toString()),e.setState({volume2:t})):(localStorage.setItem(Z,t.toString()),e.setState({volume:t}))},voice:this.state.voice,voice2:this.state.voice2,setVoice:function(t,n){n?(localStorage.setItem(ne,t.name),e.setState({voice2:t})):(localStorage.setItem(te,t.name),e.setState({voice:t}))}})}return o.createElement(P,{help:function(){return e.setState({display:M.Help})},play:function(){localStorage.setItem(ae,"true"),e.setState({display:M.Play})},configure:function(){return e.setState({display:M.Config})}})}}]),t}(o.Component),se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}l.a.render(s.a.createElement(oe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");se?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ie(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ie(t,e)})}}()}},[[13,2,1]]]);
//# sourceMappingURL=main.5b6ee831.chunk.js.map