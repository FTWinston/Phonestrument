(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/logo.2bedb0e3.svg"},12:function(e,t,n){e.exports=n(33)},20:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a,o=n(0),s=n.n(o),c=n(9),r=n.n(c),i=n(1),l=n(2),m=n(4),u=n(3),f=n(5),p=n(7),v=n.n(p),h=n(10),y=n(6);!function(e){e[e.Note=0]="Note",e[e.HighlightNote=1]="HighlightNote"}(a||(a={}));var d=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={active:!1,text:e.text,octave:e.octave,altProfile:e.altProfile},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.altProfile===this.props.altProfile||this.state.active||this.setState({text:e.text,octave:e.octave,altProfile:e.altProfile})}},{key:"render",value:function(){var e=this,t=function(){e.setState({active:!1,text:e.props.text,octave:e.props.octave,altProfile:e.props.altProfile}),!1!==e.props.enabled&&e.props.stop()},n="player__button";switch(this.state.active&&(n+=" player__button--active"),this.state.altProfile&&(n+=" player__button--altProfile"),!1===this.props.enabled&&(n+=" player__button--disabled"),this.props.type!=a.Note&&this.props.type!=a.HighlightNote||(this.props.isLeft&&(n+=" player__button--left"),this.props.isRight&&(n+=" player__button--right"),this.props.isTop&&(n+=" player__button--top")),this.props.type){case a.HighlightNote:n+=" player__button--highlight"}var s=void 0===this.props.orderNum?void 0:{order:this.props.orderNum};return o.createElement("div",{className:n,style:s,onTouchStart:function(){e.setState({active:!0,text:e.props.text,octave:e.props.octave,altProfile:e.props.altProfile}),!1!==e.props.enabled&&e.props.start()},onTouchEnd:t,onTouchCancel:t},this.state.text,o.createElement("sub",null,this.state.octave))}}]),t}(o.PureComponent),g=function(){function e(){Object(i.a)(this,e),this.audioCtx=void 0,this.gain=void 0,this.oscillators={},this.audioCtx=new AudioContext,this.gain=this.audioCtx.createGain(),this.gain.connect(this.audioCtx.destination)}return Object(l.a)(e,[{key:"setVolume",value:function(e){this.gain.gain.setValueAtTime(e,this.audioCtx.currentTime)}},{key:"start",value:function(e,t){if(void 0===this.oscillators[e]){var n=this.audioCtx.createOscillator();n.type="sine",n.frequency.setValueAtTime(t,this.audioCtx.currentTime),n.start();var a=this.audioCtx.createGain();n.connect(a),a.connect(this.gain),this.oscillators[e]={oscillator:n,gain:a}}}},{key:"stop",value:function(e){var t=this.oscillators[e];void 0!==t&&(delete this.oscillators[e],this.stopOscillator(t))}},{key:"stopAll",value:function(){for(var e in this.oscillators){var t=this.oscillators[e];this.stopOscillator(t)}this.oscillators={}}},{key:"stopOscillator",value:function(e){var t=this,n=e.gain.gain;n.setValueAtTime(n.value,this.audioCtx.currentTime),n.exponentialRampToValueAtTime(1e-4,this.audioCtx.currentTime+.05),setTimeout(function(){e.oscillator.stop(),e.gain.disconnect(t.gain)},25)}}]),e}(),E=(n(20),n(22)),b=n(23),q=n(24),_=n(25),S=n(26),k=n(27),T=n(28),N=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).audio=new g,n.tiltListener=function(e){return n.updateTilt(e)},n.state=Object(y.a)({},e.profiles[0],{altProfile:!1}),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.audio.setVolume(this.state.volume),this.props.profiles.length>1&&window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",this.tiltListener);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.audio.stopAll(),this.props.profiles.length>1&&window.removeEventListener("deviceorientation",this.tiltListener)}},{key:"updateTilt",value:function(e){null!==e.beta&&(this.state.altProfile?e.beta<0&&this.setState(Object(y.a)({},this.props.profiles[0],{altProfile:!1})):e.beta>0&&this.setState(Object(y.a)({},this.props.profiles[1],{altProfile:!0})))}},{key:"render",value:function(){var e=this,t=this.renderNoteButtons(this.state.notes),n=this.state.altProfile?"player player--altProfile":"player",a=this.props.profiles.length<2?o.createElement("div",{className:"player__tilt"}):this.state.altProfile?o.createElement("div",{className:"player__tilt"},o.createElement(S,null)," Tilt left",o.createElement("br",null),"for ",this.props.profiles[0].keyName):o.createElement("div",{className:"player__tilt"},o.createElement(k,null),"Tilt right",o.createElement("br",null),"for ",this.props.profiles[1].keyName);return o.createElement("div",{className:n},t,o.createElement("div",{className:"player__key"},this.state.keyName),o.createElement("a",{className:"player__config",href:"#",onClick:function(t){t.preventDefault(),e.props.configure()}},o.createElement(_,null)," Configure"),a)}},{key:"renderNoteButtons",value:function(e){var n=this;return e.map(function(e,s){var c=e.name===n.state.highlightNoteName?a.HighlightNote:a.Note,r=s<t.buttonOrder.length?t.buttonOrder[s]:void 0;return o.createElement(d,{key:s,text:e.name,octave:e.octave,orderNum:r,start:function(){return n.audio.start(s,e.frequency)},stop:function(){return n.audio.stop(s)},isLeft:s<5,isRight:s>=15,isTop:s%5===4,type:c,altProfile:n.state.altProfile})})}}]),t}(o.Component);N.buttonOrder=[4,3,2,1,0,9,8,7,6,5,14,13,12,11,10,19,18,17,16,15];var C=n(11),B=n.n(C),O=(n(29),function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("div",{className:"site site--home"},o.createElement("header",{className:"site__header"},o.createElement("h2",{className:"site__title"},"Thumbophone"),o.createElement("img",{src:B.a,className:"site__logo",alt:"logo"}),o.createElement("p",null,"Use your phone as a musical instrument!")),o.createElement("div",{className:"site__links"},o.createElement("a",{className:"site__link",href:"#",onClick:function(t){t.preventDefault(),e.props.help()}},o.createElement(E,null)," Instructions"),o.createElement("a",{className:"site__link",href:"#",onClick:function(t){t.preventDefault(),e.props.configure()}},o.createElement(_,null)," Configure"),o.createElement("a",{className:"site__link site__link--primary",href:"#",onClick:function(t){t.preventDefault(),e.props.play()}},o.createElement(q,null)," Play now")))}}]),t}(o.Component)),A=11,w=[[{name:"C",frequency:16.35,octave:0},{name:"D\u266d",frequency:17.32,octave:0},{name:"D",frequency:18.35,octave:0},{name:"E\u266d",frequency:19.45,octave:0},{name:"E",frequency:20.6,octave:0},{name:"F",frequency:21.83,octave:0},{name:"G\u266d",frequency:23.12,octave:0},{name:"G",frequency:24.5,octave:0},{name:"A\u266d",frequency:25.96,octave:0},{name:"A",frequency:27.5,octave:0},{name:"B\u266d",frequency:29.14,octave:0},{name:"B",frequency:30.87,octave:0}],[{name:"C",frequency:32.7,octave:1},{name:"D\u266d",frequency:34.65,octave:1},{name:"D",frequency:36.71,octave:1},{name:"E\u266d",frequency:38.89,octave:1},{name:"E",frequency:41.2,octave:1},{name:"F",frequency:43.65,octave:1},{name:"G\u266d",frequency:46.25,octave:1},{name:"G",frequency:49,octave:1},{name:"A\u266d",frequency:51.91,octave:1},{name:"A",frequency:55,octave:1},{name:"B\u266d",frequency:58.27,octave:1},{name:"B",frequency:61.74,octave:1}],[{name:"C",frequency:65.41,octave:2},{name:"D\u266d",frequency:69.3,octave:2},{name:"D",frequency:73.42,octave:2},{name:"E\u266d",frequency:77.78,octave:2},{name:"E",frequency:82.41,octave:2},{name:"F",frequency:87.31,octave:2},{name:"G\u266d",frequency:92.5,octave:2},{name:"G",frequency:98,octave:2},{name:"A\u266d",frequency:103.83,octave:2},{name:"A",frequency:110,octave:2},{name:"B\u266d",frequency:116.54,octave:2},{name:"B",frequency:123.47,octave:2}],[{name:"C",frequency:130.81,octave:3},{name:"D\u266d",frequency:138.59,octave:3},{name:"D",frequency:146.83,octave:3},{name:"E\u266d",frequency:155.56,octave:3},{name:"E",frequency:164.81,octave:3},{name:"F",frequency:174.61,octave:3},{name:"G\u266d",frequency:185,octave:3},{name:"G",frequency:196,octave:3},{name:"A\u266d",frequency:207.65,octave:3},{name:"A",frequency:220,octave:3},{name:"B\u266d",frequency:233.08,octave:3},{name:"B",frequency:246.94,octave:3}],[{name:"C",frequency:261.63,octave:4},{name:"D\u266d",frequency:277.18,octave:4},{name:"D",frequency:293.66,octave:4},{name:"E\u266d",frequency:311.13,octave:4},{name:"E",frequency:329.63,octave:4},{name:"F",frequency:349.23,octave:4},{name:"G\u266d",frequency:369.99,octave:4},{name:"G",frequency:392,octave:4},{name:"A\u266d",frequency:415.3,octave:4},{name:"A",frequency:440,octave:4},{name:"B\u266d",frequency:466.16,octave:4},{name:"B",frequency:493.88,octave:4}],[{name:"C",frequency:523.25,octave:5},{name:"D\u266d",frequency:554.37,octave:5},{name:"D",frequency:587.33,octave:5},{name:"E\u266d",frequency:622.25,octave:5},{name:"E",frequency:659.25,octave:5},{name:"F",frequency:698.46,octave:5},{name:"G\u266d",frequency:739.99,octave:5},{name:"G",frequency:783.99,octave:5},{name:"A\u266d",frequency:830.61,octave:5},{name:"A",frequency:880,octave:5},{name:"B\u266d",frequency:932.33,octave:5},{name:"B",frequency:987.77,octave:5}],[{name:"C",frequency:1046.5,octave:6},{name:"D\u266d",frequency:1108.73,octave:6},{name:"D",frequency:1174.66,octave:6},{name:"E\u266d",frequency:1244.51,octave:6},{name:"E",frequency:1318.51,octave:6},{name:"F",frequency:1396.91,octave:6},{name:"G\u266d",frequency:1479.98,octave:6},{name:"G",frequency:1567.98,octave:6},{name:"A\u266d",frequency:1661.22,octave:6},{name:"A",frequency:1760,octave:6},{name:"B\u266d",frequency:1864.66,octave:6},{name:"B",frequency:1975.53,octave:6}],[{name:"C",frequency:2093,octave:7},{name:"D\u266d",frequency:2217.46,octave:7},{name:"D",frequency:2349.32,octave:7},{name:"E\u266d",frequency:2489.02,octave:7},{name:"E",frequency:2637.02,octave:7},{name:"F",frequency:2793.83,octave:7},{name:"G\u266d",frequency:2959.96,octave:7},{name:"G",frequency:3135.96,octave:7},{name:"A\u266d",frequency:3322.44,octave:7},{name:"A",frequency:3520,octave:7},{name:"B\u266d",frequency:3729.31,octave:7},{name:"B",frequency:3951.07,octave:7}],[{name:"C",frequency:4186.01,octave:8},{name:"D\u266d",frequency:4434.92,octave:8},{name:"D",frequency:4698.63,octave:8},{name:"E\u266d",frequency:4978.03,octave:8},{name:"E",frequency:5274.04,octave:8},{name:"F",frequency:5587.65,octave:8},{name:"G\u266d",frequency:5919.91,octave:8},{name:"G",frequency:6271.93,octave:8},{name:"A\u266d",frequency:6644.88,octave:8},{name:"A",frequency:7040,octave:8},{name:"B\u266d",frequency:7458.62,octave:8},{name:"B",frequency:7902.13,octave:8}]],D=[{name:"Major",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[8,10,0,1,3,5,7]},{name:"A",notes:[9,A,1,2,4,6,8]},{name:"B\u266d",notes:[10,0,2,3,5,7,9]},{name:"B",notes:[A,1,3,4,6,8,10]},{name:"C",notes:[0,2,4,5,7,9,A]},{name:"D\u266d",notes:[1,3,5,6,8,10,0]},{name:"D",notes:[2,4,6,7,9,A,1]},{name:"E\u266d",notes:[3,5,7,8,10,0,2]},{name:"E",notes:[4,6,8,9,A,1,3]},{name:"F",notes:[5,7,9,10,0,2,4]},{name:"G\u266d",notes:[6,8,10,A,1,3,5]},{name:"G",notes:[7,9,A,0,2,4,6]}]},{name:"Minor",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[8,10,A,1,3,4,6]},{name:"A",notes:[9,A,0,2,4,5,7]},{name:"B\u266d",notes:[10,0,1,3,5,6,8]},{name:"B",notes:[A,1,2,4,6,7,9]},{name:"C",notes:[0,2,3,5,7,8,10]},{name:"D\u266d",notes:[1,3,4,6,8,9,A]},{name:"D",notes:[2,4,5,7,9,10,0]},{name:"E\u266d",notes:[3,5,6,8,10,A,1]},{name:"E",notes:[4,6,7,9,A,0,2]},{name:"F",notes:[5,7,8,10,0,1,3]},{name:"G\u266d",notes:[6,8,9,A,1,2,4]},{name:"G",notes:[7,9,10,0,2,3,5]}]},{name:"Chromatic",notesBeforeTonic:5,scales:[{name:"A\u266d",notes:[8,9,10,A,0,1,2,3,4,5,6,7]},{name:"A",notes:[9,10,A,0,1,2,3,4,5,6,7,8]},{name:"B\u266d",notes:[10,A,0,1,2,3,4,5,6,7,8,9]},{name:"B",notes:[A,0,1,2,3,4,5,6,7,8,9,10]},{name:"C",notes:[0,1,2,3,4,5,6,7,8,9,10,A]},{name:"D\u266d",notes:[1,2,3,4,5,6,7,8,9,10,A,0]},{name:"D",notes:[2,3,4,5,6,7,8,9,10,A,0,1]},{name:"E\u266d",notes:[3,4,5,6,7,8,9,10,A,0,1,2]},{name:"E",notes:[4,5,6,7,8,9,10,A,0,1,2,3]},{name:"F",notes:[5,6,7,8,9,10,A,0,1,2,3,4]},{name:"G\u266d",notes:[6,7,8,9,10,A,0,1,2,3,4,5]},{name:"G",notes:[7,8,9,10,A,0,1,2,3,4,5,6]}]},{name:"Melodic Minor",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[8,10,A,1,3,5,7]},{name:"A",notes:[9,A,0,2,4,6,8]},{name:"B\u266d",notes:[10,0,1,3,5,7,9]},{name:"B",notes:[A,1,2,4,6,8,10]},{name:"C",notes:[0,2,3,5,7,9,A]},{name:"D\u266d",notes:[1,3,4,6,8,10,0]},{name:"D",notes:[2,4,5,7,9,A,1]},{name:"E\u266d",notes:[3,5,6,8,10,0,2]},{name:"E",notes:[4,6,7,9,A,1,3]},{name:"F",notes:[5,7,8,10,0,2,4]},{name:"G\u266d",notes:[6,8,9,A,1,3,5]},{name:"G",notes:[7,9,10,0,2,4,6]}]},{name:"Harmonic Minor",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[8,10,A,1,3,4,7]},{name:"A",notes:[9,A,0,2,4,5,8]},{name:"B\u266d",notes:[10,0,1,3,5,6,9]},{name:"B",notes:[A,1,2,4,6,7,10]},{name:"C",notes:[0,2,3,5,7,8,A]},{name:"D\u266d",notes:[1,3,4,6,8,9,0]},{name:"D",notes:[2,4,5,7,9,10,1]},{name:"E\u266d",notes:[3,5,6,8,10,A,2]},{name:"E",notes:[4,6,7,9,A,0,3]},{name:"F",notes:[5,7,8,10,0,1,4]},{name:"G\u266d",notes:[6,8,9,A,1,2,5]},{name:"G",notes:[7,9,10,0,2,3,6]}]},{name:"Minor Pentatonic",notesBeforeTonic:5,scales:[{name:"Ab",notes:[8,A,1,3,6]},{name:"A",notes:[9,0,2,4,7]},{name:"Bb",notes:[10,1,3,5,8]},{name:"B",notes:[A,2,4,6,9]},{name:"C",notes:[0,3,5,7,10]},{name:"Db",notes:[1,4,6,8,A]},{name:"D",notes:[2,5,7,9,0]},{name:"Eb",notes:[3,6,8,10,1]},{name:"E",notes:[4,7,9,A,2]},{name:"F",notes:[5,8,10,0,3]},{name:"Gb",notes:[6,9,A,1,4]},{name:"G",notes:[7,10,0,2,5]}]},{name:"Major Pentatonic",notesBeforeTonic:5,scales:[{name:"A\u266d",notes:[8,10,0,3,5]},{name:"A",notes:[9,A,1,4,6]},{name:"B\u266d",notes:[10,0,2,5,7]},{name:"B",notes:[A,1,3,6,8]},{name:"C",notes:[0,2,4,7,9]},{name:"D\u266d",notes:[1,3,5,8,10]},{name:"D",notes:[2,4,6,9,A]},{name:"E\u266d",notes:[3,5,7,10,0]},{name:"E",notes:[4,6,8,A,1]},{name:"F",notes:[5,7,9,0,2]},{name:"G\u266d",notes:[6,8,10,1,3]},{name:"G",notes:[7,9,A,2,4]}]},{name:"Minor Pentatonic Blues",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[8,A,1,2,3,6]},{name:"A",notes:[9,0,2,3,4,7]},{name:"B\u266d",notes:[10,1,3,4,5,8]},{name:"B",notes:[A,2,4,5,6,9]},{name:"C",notes:[0,3,5,6,7,10]},{name:"D\u266d",notes:[1,4,6,7,8,A]},{name:"D",notes:[2,5,7,8,9,0]},{name:"E\u266d",notes:[3,6,8,9,10,1]},{name:"E",notes:[4,7,9,10,A,2]},{name:"F",notes:[5,8,10,A,0,3]},{name:"G\u266d",notes:[6,9,A,0,1,4]},{name:"G",notes:[7,10,0,1,2,5]}]},{name:"Major Pentatonic Blues",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[8,10,A,0,3,5]},{name:"A",notes:[9,A,0,1,4,6]},{name:"B\u266d",notes:[10,0,1,2,5,7]},{name:"B",notes:[A,1,2,3,6,8]},{name:"C",notes:[0,2,3,4,7,9]},{name:"D\u266d",notes:[1,3,4,5,8,10]},{name:"D",notes:[2,4,5,6,9,A]},{name:"E\u266d",notes:[3,5,6,7,10,0]},{name:"E",notes:[4,6,7,8,A,1]},{name:"F",notes:[5,7,8,9,0,2]},{name:"G\u266d",notes:[6,8,9,10,1,3]},{name:"G",notes:[7,9,10,A,2,4]}]},{name:"Major Bebop",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[8,10,0,1,3,4,5,7]},{name:"A",notes:[9,A,1,2,4,5,6,8]},{name:"B\u266d",notes:[10,0,2,3,5,6,7,9]},{name:"B",notes:[A,1,3,4,6,7,8,10]},{name:"C",notes:[0,2,4,5,7,8,9,A]},{name:"D\u266d",notes:[1,3,5,6,8,9,10,0]},{name:"D",notes:[2,4,6,7,9,10,A,1]},{name:"E\u266d",notes:[3,5,7,8,10,A,0,2]},{name:"E",notes:[4,6,8,9,A,0,1,3]},{name:"F",notes:[5,7,9,10,0,1,2,4]},{name:"G\u266d",notes:[6,8,10,A,1,2,3,5]},{name:"G",notes:[7,9,A,0,2,3,4,6]}]},{name:"Minor Bebop",notesBeforeTonic:6,scales:[{name:"A\u266d",notes:[8,10,A,0,1,3,5,6]},{name:"A",notes:[9,A,0,1,2,4,6,7]},{name:"B\u266d",notes:[10,0,1,2,3,5,7,8]},{name:"B",notes:[A,1,2,3,4,6,8,9]},{name:"C",notes:[0,2,3,4,5,7,9,10]},{name:"D\u266d",notes:[1,3,4,5,6,8,10,A]},{name:"D",notes:[2,4,5,6,7,9,A,0]},{name:"E\u266d",notes:[3,5,6,7,8,10,0,1]},{name:"E",notes:[4,6,7,8,9,A,1,2]},{name:"F",notes:[5,7,8,9,10,0,2,3]},{name:"G\u266d",notes:[6,8,9,10,A,1,3,4]},{name:"G",notes:[7,9,10,A,0,2,4,5]}]},{name:"Super Locrian",notesBeforeTonic:6,scales:[{name:"C",notes:[0,1,3,4,6,8,10]},{name:"D\u266d",notes:[1,2,4,5,7,9,A]},{name:"D",notes:[2,3,5,6,8,10,0]},{name:"E\u266d",notes:[3,4,6,7,9,A,1]},{name:"E",notes:[4,5,7,8,10,0,2]},{name:"F",notes:[5,6,8,9,A,1,3]},{name:"G\u266d",notes:[6,7,9,10,0,2,4]},{name:"G",notes:[7,8,10,A,1,3,5]},{name:"A\u266d",notes:[8,9,A,0,2,4,6]},{name:"A",notes:[9,10,0,1,3,5,7]},{name:"B\u266d",notes:[10,A,1,2,4,6,8]},{name:"B",notes:[A,0,2,3,5,7,9]}]}],P=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("div",{className:"site site--help"},o.createElement("header",{className:"site__header"},o.createElement("p",null,"How to play")),o.createElement("div",{className:"site__help"},o.createElement("p",null,"The thumbophone is intended to be played on a mobile phone or similar-sized device, held in two hands. Use your left thumb for the keys on the left-hand side of the screen, and your right thumb for the keys on the right."),o.createElement("p",null,"The thumbophone ",o.createElement("em",null,"does not")," give you access to all notes; it only lets you use notes in the selected scale. (However you can select a chromatic scale if you wish.) This is similar to how most harmonicas work, except with the thumbophone, you can quickly change the scale."),o.createElement("p",null,"When you first start playing, it's easiest if you ignore the smaller buttons on the outermost columns, and just use the central two columns of buttons. Once you feel comfortable with these, move on to using the outer buttons as needed."),o.createElement("p",null,'For advanced users, you can enable an "alternate" configuration and tilt your phone left/right to switch between configurations while playing. This can be quite offputting for new players.')),o.createElement("div",{className:"site__links"},o.createElement("a",{className:"site__link",href:"#",onClick:function(t){t.preventDefault(),e.props.back()}},o.createElement(b,null)," Home")))}}]),t}(o.Component);function j(e,t,n){for(var a=-1,o=n,s=e.notes.map(function(e){return e<a&&o<w.length-1&&o++,a=e,w[o][e]}),c=t.notesBeforeTonic,r=20-c-e.notes.length,i=-1,l=0;l<r;l++){++i>=e.notes.length&&(i=0);var m=e.notes[i];m<a&&o<w.length-2&&o++,a=m,s.push(w[o][m])}a=e.notes[0],o=n,i=e.notes.length;for(var u=0;u<c;u++){--i<0&&(i=e.notes.length-1);var f=e.notes[i];f>a&&o>0&&o--,a=f,s.unshift(w[o][f])}return s}n(31);var G,x=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=D.indexOf(this.props.scaleType),n=this.props.scaleType.scales.indexOf(this.props.scale),a=D.map(function(e,t){return o.createElement("option",{key:t,value:t.toString()},e.name)}),s=this.props.scaleType.scales.map(function(e,t){return o.createElement("option",{key:t,value:t.toString()},e.name)}),c=this.props.isAlternate?"site__options site__options--alternate":"site__options";return o.createElement("div",{className:c},o.createElement("label",{className:"site__option"},o.createElement("span",{className:"site__label"},"Scale"),o.createElement("select",{className:"site__value",value:t.toString(),onChange:function(t){return e.props.selectScaleType(D[t.target.selectedIndex])}},a)),o.createElement("label",{className:"site__option"},o.createElement("span",{className:"site__label"},"Tonic"),o.createElement("select",{className:"site__value",value:n.toString(),onChange:function(t){return e.props.selectScale(e.props.scaleType.scales[t.target.selectedIndex])}},s)),o.createElement("label",{className:"site__option"},o.createElement("span",{className:"site__label"},"Octave"),o.createElement("input",{className:"site__value",type:"range",min:"1",max:"6",step:"1",value:this.props.octave,onChange:function(t){return e.props.setOctave(parseInt(t.target.value))}})),o.createElement("label",{className:"site__option"},o.createElement("span",{className:"site__label"},"Volume"),o.createElement("input",{className:"site__value",type:"range",min:"0",max:"1",step:"0.025",value:this.props.volume,onChange:function(t){return e.props.setVolume(parseFloat(t.target.value))}})))}}]),t}(o.Component),F=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.useSplitProfile?o.createElement(x,{isAlternate:!0,scaleType:this.props.scaleType2,scale:this.props.scale2,octave:this.props.octave2,volume:this.props.volume2,selectScaleType:function(t){return e.props.selectScaleType(t,!0)},selectScale:function(t){return e.props.selectScale(t,!0)},setOctave:function(t){return e.props.setOctave(t,!0)},setVolume:function(t){return e.props.setVolume(t,!0)}}):void 0,n=void 0===this.props.install?void 0:o.createElement("a",{className:"site__link",href:"#",onClick:function(t){t.preventDefault(),e.props.back()}},o.createElement(T,null)," Add to home screen");return o.createElement("div",{className:"site site--configuration"},o.createElement("header",{className:"site__header"},o.createElement("p",null,"Configuration")),o.createElement(x,{isAlternate:!1,scaleType:this.props.scaleType,scale:this.props.scale,octave:this.props.octave,volume:this.props.volume,selectScaleType:function(t){return e.props.selectScaleType(t,!1)},selectScale:function(t){return e.props.selectScale(t,!1)},setOctave:function(t){return e.props.setOctave(t,!1)},setVolume:function(t){return e.props.setVolume(t,!1)}}),o.createElement("label",{className:"site__useAlt"},"Tilt screen for alternate configuration",o.createElement("input",{type:"checkbox",checked:this.props.useSplitProfile,onChange:function(t){return e.props.setUseSplitProfile(t.target.checked)}})),t,o.createElement("div",{className:"site__links"},o.createElement("a",{className:"site__link",href:"#",onClick:function(t){t.preventDefault(),e.props.back()}},o.createElement(b,null)," Home"),o.createElement("a",{className:"site__link site__link--primary",href:"#",onClick:function(t){t.preventDefault(),e.props.play()}},o.createElement(q,null)," Play now"),n))}}]),t}(o.Component);!function(e){e[e.Home=0]="Home",e[e.Help=1]="Help",e[e.Play=2]="Play",e[e.Config=3]="Config"}(G||(G={}));var I="useSplit",H="scaleType",V="scaleType2",M="scaleNote",L="scaleNote2",U="octave",W="octave2",R="volume",J="volume2",z="hasPlayedBefore",$=function(e){function t(e){var n;Object(i.a)(this,t);var a=(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).loadScaleType(H),o=n.loadScaleType(V);return n.state={display:null===sessionStorage.getItem(z)?G.Home:G.Play,scaleType:a,scale:n.loadScale(a,M),octave:n.loadOctave(U),volume:n.loadVolume(R),useSplitProfile:n.loadUseSplit(I),scaleType2:o,scale2:n.loadScale(o,L),octave2:n.loadOctave(W),volume2:n.loadVolume(J)},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),e.setState({installPrompt:t})}),window.addEventListener("appinstalled",function(t){e.setState({installPrompt:void 0})})}},{key:"loadScaleType",value:function(e){var t=sessionStorage.getItem(e);if(null!==t){var n=D.filter(function(e){return e.name===t});if(n.length>0)return n[0]}return D[0]}},{key:"loadScale",value:function(e,t){var n=sessionStorage.getItem(t);if(null!==n){var a=e.scales.filter(function(e){return e.name===n});if(a.length>0)return a[0]}return e.scales.filter(function(e){return"C"===e.name})[0]}},{key:"loadOctave",value:function(e){var t=sessionStorage.getItem(e);if(null!==t){var n=parseInt(t);if(n>=0&&n<w.length)return n}return 4}},{key:"loadVolume",value:function(e){var t=sessionStorage.getItem(e);if(null!==t){var n=parseFloat(t);if(n>=0&&n<=1)return n}return.1}},{key:"loadUseSplit",value:function(e){return"true"===sessionStorage.getItem(e)}},{key:"render",value:function(){var e=this;if(this.state.display===G.Help){return o.createElement(P,{back:function(){return e.setState({display:G.Home})}})}if(this.state.display===G.Play){var t=[{notes:j(this.state.scale,this.state.scaleType,this.state.octave),highlightNoteName:this.state.scale.name,keyName:"".concat(this.state.scale.name," ").concat(this.state.scaleType.name),volume:this.state.volume}];return this.state.useSplitProfile&&t.push({notes:j(this.state.scale2,this.state.scaleType2,this.state.octave2),highlightNoteName:this.state.scale2.name,keyName:"".concat(this.state.scale2.name," ").concat(this.state.scaleType2.name),volume:this.state.volume2}),o.createElement(N,{goHome:function(){return e.setState({display:G.Home})},configure:function(){return e.setState({display:G.Config})},profiles:t})}if(this.state.display===G.Config){var n=void 0===this.state.installPrompt?void 0:function(){return e.state.installPrompt.prompt()};return o.createElement(F,{play:function(){sessionStorage.setItem(z,"true"),e.setState({display:G.Play})},back:function(){return e.setState({display:G.Home})},install:n,useSplitProfile:this.state.useSplitProfile,setUseSplitProfile:function(t){sessionStorage.setItem(I,t.toString()),e.setState({useSplitProfile:t})},scaleType:this.state.scaleType,scaleType2:this.state.scaleType2,selectScaleType:function(t,n){var a=e.state.scaleType.scales.indexOf(n?e.state.scale2:e.state.scale),o=a>=0&&a<t.scales.length?t.scales[a]:t.scales[0];n?(sessionStorage.setItem(V,t.name),e.setState({scaleType2:t,scale2:o})):(sessionStorage.setItem(H,t.name),e.setState({scaleType:t,scale:o}))},scale:this.state.scale,scale2:this.state.scale2,selectScale:function(t,n){n?(sessionStorage.setItem(L,t.name),e.setState({scale2:t})):(sessionStorage.setItem(M,t.name),e.setState({scale:t}))},octave:this.state.octave,octave2:this.state.octave2,setOctave:function(t,n){n?(sessionStorage.setItem(W,t.toString()),e.setState({octave2:t})):(sessionStorage.setItem(U,t.toString()),e.setState({octave:t}))},volume:this.state.volume,volume2:this.state.volume2,setVolume:function(t,n){n?(sessionStorage.setItem(J,t.toString()),e.setState({volume2:t})):(sessionStorage.setItem(R,t.toString()),e.setState({volume:t}))}})}return o.createElement(O,{help:function(){return e.setState({display:G.Help})},play:function(){sessionStorage.setItem(z,"true"),e.setState({display:G.Play})},configure:function(){return e.setState({display:G.Config})}})}}]),t}(o.Component),K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Q(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(s.a.createElement($,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");K?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Q(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Q(t,e)})}}()}},[[12,2,1]]]);
//# sourceMappingURL=main.2d4f3e55.chunk.js.map